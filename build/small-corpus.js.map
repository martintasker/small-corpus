{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap fe301920cf3a68d0c272","webpack:///./src/small-corpus.js"],"names":["SmallCorpus","docs","getString","self","IDF","map","doc","words","_wordsFromString","corpusWordIndex","forEach","docWordIndex","word","Object","keys","Math","log","string","replace","toLowerCase","split","filter","v","term","terms","hits","item","missedAnyTerm","bestTermRank","hitThisTerm","thisTermRank","indexOf","max","res","rank","sort","a","b"],"mappings":"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","file":"small-corpus.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SmallCorpus\"] = factory();\n\telse\n\t\troot[\"SmallCorpus\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fe301920cf3a68d0c272","class SmallCorpus {\n  constructor(docs, getString) {\n    var self = this;\n\n    this.docs = [];\n    this.IDF = {};\n\n    this.docs = docs.map(function(doc) {\n      return {\n        doc: doc,\n        words: self._wordsFromString(getString(doc))\n      };\n    });\n\n    var corpusWordIndex = {}; // count of documents in corpus including each word\n\n    this.docs.forEach(function(doc) {\n      var docWordIndex = {};\n      doc.words.forEach(function(word) {\n        docWordIndex[word] = true;\n      });\n      Object.keys(docWordIndex).forEach(function(word) {\n        corpusWordIndex[word] = corpusWordIndex[word] + 1 || 1;\n      });\n    });\n\n    Object.keys(corpusWordIndex).forEach(function(word) {\n      self.IDF[word] = 1 / (1 + Math.log(corpusWordIndex[word]));\n    });\n\n    corpusWordIndex = null; // free the memory\n  }\n\n  _wordsFromString(string) {\n    string = string.replace(/'/gi, '');\n    string = string.replace(/[^\\w\\s]/gi, ' ');\n    return string.toLowerCase().split(\" \").filter(function(v) {\n      return !!v;\n    });\n  };\n\n  search(term) {\n    var self = this;\n    var terms = this._wordsFromString(term);\n    var hits = this.docs.map(function(item) {\n      var missedAnyTerm = false;\n      var bestTermRank = 0;\n      terms.forEach(function(term) {\n        var hitThisTerm = false;\n        var thisTermRank = 0;\n        item.words.forEach(function(word) {\n          if (word.indexOf(term) === 0) {\n            thisTermRank = Math.max(thisTermRank, self.IDF[word]);\n            hitThisTerm = true;\n          }\n        });\n        if (!hitThisTerm) {\n          missedAnyTerm = true;\n        } else {\n          bestTermRank = Math.max(bestTermRank, thisTermRank);\n        }\n      });\n      var res = {\n        item: item,\n        rank: missedAnyTerm\n          ? 0\n          : bestTermRank\n      };\n      return res;\n    }).filter(function(item) {\n      return !term || item.rank > 0;\n    }).sort(function(a, b) {\n      return b.rank - a.rank;\n    }).map(function(item) {\n      return item.item.doc;\n    });\n    return hits;\n  }\n}\n\nexport default SmallCorpus;\n\n\n\n// WEBPACK FOOTER //\n// ./src/small-corpus.js"],"sourceRoot":""}