{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///small-corpus-searcher.min.js","webpack:///webpack/bootstrap e9e00322f91d64e98cd5?1587","webpack:///./src/small-corpus-searcher.js?58a8"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","SmallCorpusSearcher","docs","getString","self","IDF","map","doc","words","_wordsFromString","corpusWordIndex","forEach","docWordIndex","word","keys","Math","log","string","replace","toLowerCase","split","filter","v","term","terms","hits","item","missedAnyTerm","bestTermRank","hitThisTerm","thisTermRank","indexOf","max","res","rank","sort","a","b","default"],"mappings":"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","file":"small-corpus-searcher.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SmallCorpusSearcher\"] = factory();\n\telse\n\t\troot[\"SmallCorpusSearcher\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SmallCorpusSearcher\"] = factory();\n\telse\n\t\troot[\"SmallCorpusSearcher\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar SmallCorpusSearcher = function () {\n\t  function SmallCorpusSearcher(docs, getString) {\n\t    _classCallCheck(this, SmallCorpusSearcher);\n\t\n\t    var self = this;\n\t\n\t    this.docs = [];\n\t    this.IDF = {};\n\t\n\t    this.docs = docs.map(function (doc) {\n\t      return {\n\t        doc: doc,\n\t        words: self._wordsFromString(getString(doc))\n\t      };\n\t    });\n\t\n\t    var corpusWordIndex = {}; // count of documents in corpus including each word\n\t\n\t    this.docs.forEach(function (doc) {\n\t      var docWordIndex = {};\n\t      doc.words.forEach(function (word) {\n\t        docWordIndex[word] = true;\n\t      });\n\t      Object.keys(docWordIndex).forEach(function (word) {\n\t        corpusWordIndex[word] = corpusWordIndex[word] + 1 || 1;\n\t      });\n\t    });\n\t\n\t    Object.keys(corpusWordIndex).forEach(function (word) {\n\t      self.IDF[word] = 1 / (1 + Math.log(corpusWordIndex[word]));\n\t    });\n\t\n\t    corpusWordIndex = null; // free the memory\n\t  }\n\t\n\t  _createClass(SmallCorpusSearcher, [{\n\t    key: '_wordsFromString',\n\t    value: function _wordsFromString(string) {\n\t      string = string.replace(/'/gi, '');\n\t      string = string.replace(/[^\\w\\s]/gi, ' ');\n\t      return string.toLowerCase().split(\" \").filter(function (v) {\n\t        return !!v;\n\t      });\n\t    }\n\t  }, {\n\t    key: 'filter',\n\t    value: function filter(term) {\n\t      var self = this;\n\t      var terms = this._wordsFromString(term);\n\t      var hits = this.docs.map(function (item) {\n\t        var missedAnyTerm = false;\n\t        var bestTermRank = 0;\n\t        terms.forEach(function (term) {\n\t          var hitThisTerm = false;\n\t          var thisTermRank = 0;\n\t          item.words.forEach(function (word) {\n\t            if (word.indexOf(term) === 0) {\n\t              thisTermRank = Math.max(thisTermRank, self.IDF[word]);\n\t              hitThisTerm = true;\n\t            }\n\t          });\n\t          if (!hitThisTerm) {\n\t            missedAnyTerm = true;\n\t          } else {\n\t            bestTermRank = Math.max(bestTermRank, thisTermRank);\n\t          }\n\t        });\n\t        var res = {\n\t          item: item,\n\t          rank: missedAnyTerm ? 0 : bestTermRank\n\t        };\n\t        return res;\n\t      }).filter(function (item) {\n\t        return !term || item.rank > 0;\n\t      }).sort(function (a, b) {\n\t        return b.rank - a.rank;\n\t      }).map(function (item) {\n\t        return item.item.doc;\n\t      });\n\t      return hits;\n\t    }\n\t  }]);\n\t\n\t  return SmallCorpusSearcher;\n\t}();\n\t\n\texports.default = SmallCorpusSearcher;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// small-corpus-searcher.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e9e00322f91d64e98cd5","class SmallCorpusSearcher {\n  constructor(docs, getString) {\n    var self = this;\n\n    this.docs = [];\n    this.IDF = {};\n\n    this.docs = docs.map(function(doc) {\n      return {\n        doc: doc,\n        words: self._wordsFromString(getString(doc))\n      };\n    });\n\n    var corpusWordIndex = {}; // count of documents in corpus including each word\n\n    this.docs.forEach(function(doc) {\n      var docWordIndex = {};\n      doc.words.forEach(function(word) {\n        docWordIndex[word] = true;\n      });\n      Object.keys(docWordIndex).forEach(function(word) {\n        corpusWordIndex[word] = corpusWordIndex[word] + 1 || 1;\n      });\n    });\n\n    Object.keys(corpusWordIndex).forEach(function(word) {\n      self.IDF[word] = 1 / (1 + Math.log(corpusWordIndex[word]));\n    });\n\n    corpusWordIndex = null; // free the memory\n  }\n\n  _wordsFromString(string) {\n    string = string.replace(/'/gi, '');\n    string = string.replace(/[^\\w\\s]/gi, ' ');\n    return string.toLowerCase().split(\" \").filter(function(v) {\n      return !!v;\n    });\n  };\n\n  filter(term) {\n    var self = this;\n    var terms = this._wordsFromString(term);\n    var hits = this.docs.map(function(item) {\n      var missedAnyTerm = false;\n      var bestTermRank = 0;\n      terms.forEach(function(term) {\n        var hitThisTerm = false;\n        var thisTermRank = 0;\n        item.words.forEach(function(word) {\n          if (word.indexOf(term) === 0) {\n            thisTermRank = Math.max(thisTermRank, self.IDF[word]);\n            hitThisTerm = true;\n          }\n        });\n        if (!hitThisTerm) {\n          missedAnyTerm = true;\n        } else {\n          bestTermRank = Math.max(bestTermRank, thisTermRank);\n        }\n      });\n      var res = {\n        item: item,\n        rank: missedAnyTerm\n          ? 0\n          : bestTermRank\n      };\n      return res;\n    }).filter(function(item) {\n      return !term || item.rank > 0;\n    }).sort(function(a, b) {\n      return b.rank - a.rank;\n    }).map(function(item) {\n      return item.item.doc;\n    });\n    return hits;\n  }\n}\n\nexport default SmallCorpusSearcher;\n\n\n\n// WEBPACK FOOTER //\n// ./src/small-corpus-searcher.js"],"sourceRoot":""}